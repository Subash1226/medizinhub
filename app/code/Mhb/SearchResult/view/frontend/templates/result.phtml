<?php
/**
 * Main search results template
 *
 * @var $block \Mhb\SearchResult\Block\Filter
 */
$searchQuery = $block->getRequest()->getParam('q');
$_productCollection = $block->getProductCollection();
?>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<div class="container-fluid cusrp-search-container">
    <!-- Page Header with Search Query and Sort -->
    <?php if ($_productCollection && $_productCollection->count()): ?> 
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="cusrp-search-results-header d-flex justify-content-between align-items-center">
                <div class="cusrp-search-title">
                    <span class="cusrp-search-query">Search results for '<?= $searchQuery ?>'</span>
                    <div class="cusrp-search-count">Showing "<?= $_productCollection->getSize() ?>+ related products"
                        <span>
                            <svg class="cusrp-search-count-svg" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none">
                                <g clip-path="url(#clip0_610_2315)">
                                    <path d="M9.53703 10.4808L9.40625 10.4512L9.77328 8.80591L13.4984 13.2525L19.2697 12.704L16.1942 17.6189L18.4977 22.9387L17.3333 22.6476L17.367 22.5042L15.1522 17.4417L17.5273 13.7629L12.8192 14.1975L9.53703 10.4808Z" fill="#8F7FD3"/>
                                    <path d="M17.5272 13.7631L15.152 17.4419L17.3669 22.5044L17.3331 22.6478L12.8739 21.5341L8.52437 25.3689L8.12359 19.585L3.13281 16.6361L8.51172 14.4677L9.40609 10.4514L9.53687 10.4809L12.8191 14.1977L17.5272 13.7631Z" fill="#AE9AED"/>
                                    <path d="M24.7733 18.0619C25.8497 18.0619 26.7223 17.0891 26.7223 15.8892C26.7223 14.6893 25.8497 13.7166 24.7733 13.7166C23.6968 13.7166 22.8242 14.6893 22.8242 15.8892C22.8242 17.0891 23.6968 18.0619 24.7733 18.0619Z" fill="white"/>
                                    <path d="M23.4689 5.19055L21.3722 6.96664L21.6464 9.70461L19.3092 8.25758L16.7906 9.36711L17.4445 6.69664L15.6094 4.64633L18.3516 4.43961L19.7353 2.06445L20.7816 4.60836L23.4689 5.19055Z" fill="#F9DB03"/>
                                    <path d="M6.22109 6.41408C5.70717 6.44315 5.22576 6.67491 4.88251 7.0585C4.53925 7.44209 4.36218 7.94619 4.39016 8.46018C4.41706 7.94506 4.23849 7.44031 3.89365 7.05671C3.5488 6.6731 3.06585 6.44199 2.55078 6.41408C3.06579 6.3849 3.5482 6.15266 3.89222 5.76831C4.23624 5.38395 4.41379 4.87885 4.38594 4.36377C4.35876 4.87868 4.53654 5.38341 4.88043 5.76761C5.22432 6.15182 5.70633 6.38424 6.22109 6.41408Z" fill="white"/>
                                    <path d="M19.2313 12.2822L13.679 12.8095L10.0973 8.5359C10.0467 8.47563 9.98026 8.4307 9.90549 8.4062C9.83071 8.38169 9.75057 8.37859 9.67413 8.39724C9.59768 8.41589 9.52797 8.45555 9.47288 8.51174C9.41779 8.56793 9.37951 8.6384 9.36237 8.7152L8.1478 14.1574L2.97477 16.244C2.90179 16.2734 2.83851 16.3227 2.79207 16.3862C2.74563 16.4497 2.71788 16.525 2.71195 16.6034C2.70603 16.6819 2.72217 16.7605 2.75854 16.8302C2.79492 16.9 2.85009 16.9582 2.91781 16.9983L7.71959 19.8337L8.10434 25.3978C8.10979 25.4763 8.13709 25.5518 8.18316 25.6156C8.22923 25.6794 8.29224 25.7291 8.36506 25.759C8.43786 25.7888 8.51758 25.7978 8.59518 25.7847C8.67279 25.7717 8.7452 25.7372 8.80423 25.6851L12.9867 21.995L18.3977 23.3484C18.4741 23.3675 18.5542 23.3648 18.6292 23.3407C18.7041 23.3166 18.7708 23.272 18.8218 23.2119C18.8727 23.1519 18.9058 23.0788 18.9173 23.0009C18.9289 22.923 18.9184 22.8435 18.887 22.7712L16.6701 17.6552L19.6291 12.9302C19.671 12.8634 19.6934 12.7862 19.6937 12.7074C19.694 12.6286 19.6722 12.5513 19.6307 12.4842C19.5893 12.4171 19.53 12.363 19.4594 12.328C19.3888 12.2929 19.3097 12.2784 19.2313 12.286V12.2822ZM15.8369 17.3957C15.8006 17.4537 15.7789 17.5196 15.7738 17.5878C15.7687 17.656 15.7802 17.7244 15.8074 17.7872L17.7729 22.3228L12.9762 21.1247C12.9101 21.1083 12.841 21.1083 12.7749 21.1244C12.7088 21.1406 12.6476 21.1725 12.5965 21.2175L8.88734 24.4887L8.54605 19.5561C8.54133 19.4879 8.52008 19.4218 8.48414 19.3636C8.4482 19.3054 8.39865 19.2568 8.33975 19.222L4.08303 16.7068L8.66881 14.8581C8.7321 14.8324 8.7882 14.7917 8.83229 14.7396C8.87638 14.6874 8.90715 14.6253 8.92194 14.5586L9.99856 9.73318L13.174 13.5229C13.2177 13.5756 13.2737 13.6168 13.337 13.6428C13.4004 13.6689 13.4691 13.679 13.5372 13.6722L18.4593 13.2048L15.8369 17.3957ZM23.7432 5.51064C23.8033 5.45975 23.8479 5.39308 23.872 5.31816C23.8962 5.24325 23.8989 5.16308 23.8798 5.08671C23.8608 5.01034 23.8207 4.94083 23.7642 4.88602C23.7078 4.83122 23.6371 4.79331 23.5602 4.77658L21.0892 4.24122L20.1299 1.90403C20.1 1.83122 20.0504 1.76822 19.9865 1.72215C19.9227 1.67608 19.8473 1.64879 19.7688 1.64334C19.6903 1.6379 19.6118 1.65453 19.5422 1.69135C19.4727 1.72818 19.4148 1.78372 19.3752 1.85172L18.1024 4.0345L15.5821 4.22434C15.5036 4.23025 15.4283 4.258 15.3648 4.30444C15.3013 4.35089 15.252 4.41418 15.2225 4.48717C15.1931 4.56015 15.1846 4.63992 15.1982 4.71746C15.2117 4.79499 15.2466 4.8672 15.299 4.92592L16.9831 6.81128L16.3849 9.26744C16.3663 9.34391 16.3695 9.42405 16.3941 9.4988C16.4187 9.57355 16.4637 9.63994 16.5241 9.69045C16.5844 9.74096 16.6577 9.77359 16.7356 9.78465C16.8135 9.7957 16.893 9.78474 16.965 9.75301L19.2777 8.73418L21.4293 10.0622C21.4963 10.1037 21.5735 10.1256 21.6523 10.1254C21.7311 10.1252 21.8083 10.1029 21.8751 10.0611C21.9419 10.0193 21.9956 9.95963 22.0302 9.88885C22.0648 9.81807 22.0789 9.73901 22.0709 9.66062L21.8178 7.14582L23.7432 5.51064ZM21.1015 6.6459C21.0492 6.6901 21.0086 6.74634 20.9829 6.80977C20.9573 6.87319 20.9474 6.94191 20.9542 7.00998L21.1449 8.89534L19.5325 7.89972C19.4743 7.86376 19.4082 7.84252 19.3399 7.83781C19.2716 7.83311 19.2032 7.84509 19.1406 7.87272L17.4092 8.63631L17.8551 6.79778C17.8712 6.73153 17.8709 6.66239 17.8544 6.59626C17.8378 6.53014 17.8055 6.469 17.7602 6.41809L16.498 5.00481L18.3871 4.85715C18.4553 4.85205 18.5212 4.83046 18.5792 4.79423C18.6372 4.758 18.6855 4.70821 18.72 4.64917L19.6738 3.01356L20.391 4.76645C20.4169 4.82989 20.4577 4.88609 20.5101 4.93019C20.5625 4.97429 20.6249 5.00497 20.6918 5.01958L22.5439 5.42078L21.1015 6.6459ZM26.7238 15.4673C26.2898 15.4355 25.8859 15.2338 25.5998 14.906C25.3136 14.5782 25.1683 14.1508 25.1953 13.7165C25.1953 13.6046 25.1509 13.4973 25.0718 13.4182C24.9927 13.3391 24.8854 13.2947 24.7735 13.2947C24.6616 13.2947 24.5543 13.3391 24.4752 13.4182C24.396 13.4973 24.3516 13.6046 24.3516 13.7165C24.3789 14.1503 24.2341 14.5774 23.9486 14.9051C23.6631 15.2329 23.2599 15.4349 22.8265 15.4673C22.7146 15.4673 22.6073 15.5118 22.5282 15.5909C22.4491 15.67 22.4046 15.7773 22.4046 15.8892C22.4046 16.0011 22.4491 16.1084 22.5282 16.1875C22.6073 16.2666 22.7146 16.3111 22.8265 16.3111C23.2604 16.3431 23.6642 16.5448 23.9504 16.8726C24.2366 17.2003 24.3821 17.6276 24.3554 18.0618C24.3554 18.1737 24.3998 18.281 24.479 18.3602C24.5581 18.4393 24.6654 18.4837 24.7773 18.4837C24.8891 18.4837 24.9965 18.4393 25.0756 18.3602C25.1547 18.281 25.1991 18.1737 25.1991 18.0618C25.1717 17.628 25.3164 17.2009 25.6018 16.8731C25.8872 16.5453 26.2904 16.3432 26.7238 16.3106C26.8357 16.3106 26.943 16.2662 27.0221 16.1871C27.1012 16.108 27.1457 16.0007 27.1457 15.8888C27.1457 15.7769 27.1012 15.6696 27.0221 15.5905C26.943 15.5113 26.8357 15.4669 26.7238 15.4669V15.4673ZM24.7768 16.5853C24.605 16.3129 24.3822 16.0761 24.1208 15.8879C24.3809 15.6997 24.6026 15.4634 24.7739 15.1918C24.9455 15.4643 25.1681 15.7011 25.4295 15.8892C25.1693 16.0772 24.9478 16.3136 24.7768 16.5853ZM3.96702 8.45912C3.96702 8.57101 4.01146 8.67832 4.09058 8.75743C4.1697 8.83655 4.277 8.881 4.38889 8.881C4.50078 8.881 4.60808 8.83655 4.6872 8.75743C4.76632 8.67832 4.81077 8.57101 4.81077 8.45912C4.78495 8.05702 4.91865 7.66094 5.18289 7.35675C5.44712 7.05256 5.8206 6.86476 6.22236 6.83406C6.33425 6.83406 6.44155 6.78961 6.52067 6.71049C6.59979 6.63138 6.64423 6.52407 6.64423 6.41218C6.64423 6.3003 6.59979 6.19299 6.52067 6.11387C6.44155 6.03476 6.33425 5.99031 6.22236 5.99031C5.82004 5.96024 5.44581 5.77276 5.18084 5.46854C4.91586 5.16431 4.78153 4.76788 4.80697 4.36525C4.80697 4.25336 4.76252 4.14605 4.6834 4.06694C4.60429 3.98782 4.49698 3.94337 4.38509 3.94337C4.27321 3.94337 4.1659 3.98782 4.08678 4.06694C4.00767 4.14605 3.96322 4.25336 3.96322 4.36525C3.98891 4.76746 3.85506 5.16359 3.59066 5.46779C3.32627 5.77198 2.95265 5.95972 2.55078 5.99031C2.43889 5.99031 2.33159 6.03476 2.25247 6.11387C2.17335 6.19299 2.12891 6.3003 2.12891 6.41218C2.12891 6.52407 2.17335 6.63138 2.25247 6.71049C2.33159 6.78961 2.43889 6.83406 2.55078 6.83406C2.95321 6.86402 3.32759 7.05145 3.59272 7.35567C3.85785 7.65989 3.99234 8.05638 3.96702 8.45912ZM4.38552 5.80131C4.54057 6.03786 4.73641 6.24498 4.96391 6.41303C4.73827 6.58109 4.54417 6.78776 4.39058 7.02348C4.23605 6.78694 4.04079 6.57969 3.81387 6.41134C4.03888 6.2431 4.2324 6.03687 4.38552 5.80131Z" fill="#063851"/>
                                </g>
                                <defs>
                                    <clipPath id="clip0_610_2315">
                                    <rect width="27" height="27" fill="white" transform="translate(0.75 0.804199)"/>
                                    </clipPath>
                                </defs>
                            </svg>
                        </span>
                    </div>
                </div>
                <div class="cusrp-sort-by">
                    <span class="cusrp-sort-select">Sort By</span>
                    <div class="dropdown-container">
                        <select id="cusrp-sort-select" class="cusrp-sort-select">
                            <option value="price-high-low">Price: High to Low</option>
                            <option value="price-low-high">Price: Low to High</option>
                            <option value="name-asc">Name: A to Z</option>
                            <option value="name-desc">Name: Z to A</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Area with Filters and Product List -->
    <div class="row cusrp-content-row">
        <!-- Filter Sidebar - Left Column -->
        <?php include 'mobile-filter.phtml' ?>
        <div class="col-md-3 col-lg-3 mb-4">
            <?php include 'filter.phtml' ?>
        </div>
        
        <!-- Product Listing - Right Column -->
        <div class="col-md-9 col-lg-9">
            <div class="row">
                <div class="col-12" id="cusrp-product-list">
                <?php include 'product/list.phtml' ?>
                </div>
            </div>
        </div>
    </div>        
    <?php else: ?>
        <div class="cusrp-no-products">
            <img class="cusrp-no-products-img" src="<?= $block->getViewFileUrl('Mhb_SearchResult::images/no_product_found.png'); ?>" alt="No Products Found">
            <div class="cusrp-no-products-title">Sorry, No Results Found!</div>
            <div class="cusrp-no-products-content">We couldn’t find any products matching your search for <span class="cusrp-no-products-content-bold">”<?= $searchQuery ?>”</span>. Please check the spelling or try searching for something else... </div>
        </div>
    <?php endif; ?>
</div>

